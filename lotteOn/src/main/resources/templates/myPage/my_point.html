<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css"/>

  <!-- Swiper -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script src="/script/swiper3.js"></script>

  <!-- Script -->
  <script src="/script/search.js"></script>
  <script src="/script/myPointComma.js"></script>
  <script src="/script/myPointScript.js"></script>

  <link rel="stylesheet" href="/style/common/_footer.css">
  <link rel="stylesheet" href="/style/common/_header.css">
  <link rel="stylesheet" href="/style/mypage/myPages.css">

  <!-- Favicon -->
  <link rel="icon" sizes="32x32" th:href="@{'/images/config/' + ${config.favicon}}">

  <title>ν¬μΈνΈλ‚΄μ—­ : λ΅―λ°ON</title>
</head>
<body>
<div id="container">
  <th:block th:include="/common/_header.html"/>
  <main>
    <div class="mainWrapper">
      <div class="mainContainer">
        <aside>
          <h2>λ§μ΄λ΅―λ°</h2>
          <th:block th:insert="~{/myPage/_side.html}"/>
        </aside>
        <section>
          <div class="simpleInfoWrapper">
            <div class="simpleInfo">
              <div>
                <p>μ‡Όν•‘ν•κΈ° μΆ‹μ€ λ‚ μ΄μ—μ”!</p>
                <a th:href="@{/myPage/my_info}" class="nameBox">
                  <p class="bold" th:text="${loginUser.name}"></p>
                  <p>λ‹</p>
                </a>
                <div class="ratingBox">
                  <img src="/images/icon_mylotte.png" alt="λ“±κΈ‰">
                  <p class="bold">λ΅―λ°ON</p>
                  <p class="bold" th:text="${loginUser.rating}"></p>
                  <p>λ“±κΈ‰μ΄λ„¤μ”!</p>
                </div>
              </div>
              <div>
                <div class="myPoint">
                  <a th:href="@{/myPage/my_order}">
                    <p>μ£Όλ¬Έ μ</p>
                    <div>
                      <p class="bold" th:text="${totalOrder}"></p>
                      <p>κ±΄</p>
                    </div>
                  </a>
                </div>
                <div class="myPoint">
                  <a th:href="@{/myPage/my_point}">
                    <p>POINT</p>
                    <div>
                      <p class="bold thisIsMyPoint" th:text="${totalPointCount}"></p>
                      <p>P</p>
                    </div>
                  </a>
                </div>
                <div class="myCoupon">
                  <a th:href="@{/myPage/my_coupon}">
                    <p>λ‚μ μΏ ν°</p>
                    <div>
                      <p class="bold" th:text="${totalCoupon}"></p>
                      <p>κ°</p>
                    </div>
                  </a>
                </div>
                <div class="myReview">
                  <a th:href="@{/myPage/my_qna}">
                    <p>λ¬Έμ μ</p>
                    <div>
                      <p class="bold" th:text="${totalQnaCount}"></p>
                      <p>κ°</p>
                    </div>
                  </a>
                </div>
              </div>
            </div>
            <div class="simpleInfoFooter">
              <div class="swiper">
                <div class="swiper-wrapper">
                  <div class="swiper-slide">λ΅―λ°ONμ— μ¤μ‹  κ²ƒμ„ ν™μν•©λ‹λ‹¤!</div>
                  <div class="swiper-slide">μ¤λλ„ ν–‰λ³µν• ν•λ£¨ λ³΄λ‚΄μ„Έμ”!</div>
                  <div class="swiper-slide">λ΅―λ°6μ°¨ μκ°•μƒλ“¤ ν”„λ΅μ νΈ ν™”μ΄ν…! π’</div>
                </div>
              </div>
            </div>
          </div>
          <div class="pointHistory var">
            <div class="varTitle">
              <h3>ν¬μΈνΈ μ λ¦½ λ‚΄μ—­</h3>
              <form th:action="@{/myPage/my_point}" method="get">
                <div class="searchArea">
                  <div class="period">
                    <select name="period" id="period">
                      <option selected>μ „μ²΄</option>
                      <option value="1week" th:selected="${#strings.equals(param.period, '1week')}">1μ£ΌμΌ</option>
                      <option value="1month" th:selected="${#strings.equals(param.period, '1month')}">1κ°μ›”</option>
                      <option value="3month" th:selected="${#strings.equals(param.period, '3month')}">3κ°μ›”</option>
                      <option value="custom" th:selected="${#strings.equals(param.period, 'custom')}">μ§μ ‘μ„ νƒ</option>
                    </select>

                    <div class="selectDate">
                      <input class="date" type="date" name="startDate" th:value="${param.startDate}" />
                      ~
                      <input class="date" type="date" name="endDate" th:value="${param.endDate}" />
                    </div>
                  </div>
                  <div>
                    <button class="searchButton" type="submit">μ΅°νν•κΈ°</button>
                  </div>
                </div>
              </form>
            </div>
            <div class="orderHeader" th:if="${#lists.isEmpty(point)}">
              <div>
                <p>μ λ¦½ν• ν¬μΈνΈκ°€ μ—†μµλ‹λ‹¤.</p>
              </div>
            </div>
            <div class="pointList">
              <table>
                <tr>
                  <th>μ λ¦½μΌ</th>
                  <th>κµ¬λ¶„</th>
                  <th>μ λ¦½ ν¬μΈνΈ</th>
                  <th>μ λ¦½ μ½”λ“</th>
                  <th>μ λ¦½ λ‚΄μ©</th>
                </tr>
                <tr th:each = "point, i : ${point}" th:unless="${#lists.isEmpty(point)}">
                  <td th:text="${point.giveDate}"></td>
                  <td th:text="${point.givePoint > 0} ? 'μ λ¦½' : 'μ‚¬μ©'"></td>
                  <td th:text="${point.givePoint}" class="thisIsMyPoint savePoints"></td>
                  <td>
                    <a href="#" th:onclick="'showPopup(' + ${i.index} + '); return false;'">
                      [[${point.orderCode}]]
                    </a>
                  </td>
                  <td th:text="${point.giveContent}"></td>
                </tr>
              </table>
              <div class="pageBtn">
                <th:block th:if="${page?.end > 0}">
                  <th:block th:if="${page.prev}">
                    <a th:href="@{/myPage/my_point(pg=${page.start-2}, period=${param.period}, startDate=${param.startDate}, endDate=${param.endDate})}" class="prev">
                      <img src="/images/back-double.png">
                    </a>
                  </th:block>
                  <th:block th:if="${page.prev}">
                    <a th:href="@{/myPage/my_point(pg=${page.start-1}, period=${param.period}, startDate=${param.startDate}, endDate=${param.endDate})}" class="prev">
                      <img src="/images/back-single.png" class="single">
                    </a>
                  </th:block>

                  <th:block th:each="num:${#numbers.sequence(page.start, page.end)}">
                    <a th:href="@{/myPage/my_point(pg=${num}, period=${param.period}, startDate=${param.startDate}, endDate=${param.endDate})}" th:class="${num == page.pg} ? 'current' : 'num'">[[${num}]]</a>
                  </th:block>

                  <th:block th:if="${page.next}">
                    <a th:href="@{/myPage/my_point(pg=${page.end+1}, period=${param.period}, startDate=${param.startDate}, endDate=${param.endDate})}" class="next">
                      <img src="/images/right-single.png" class="single">
                    </a>
                  </th:block>
                  <th:block th:if="${page.next}">
                    <a th:href="@{/myPage/my_point(pg=${page.end+2}, period=${param.period}, startDate=${param.startDate}, endDate=${param.endDate})}" class="next">
                      <img src="/images/right-double.png">
                    </a>
                  </th:block>
                </th:block>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </main>
  <th:block th:replace="/common/_footer.html :: footerFragment(versionId=${selectedVersionId})"/>
</div>
</body>
</html>
