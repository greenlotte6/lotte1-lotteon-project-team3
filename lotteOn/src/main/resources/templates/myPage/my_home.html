<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" as="style" crossorigin
          href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css"/>
    <link rel="stylesheet" href="/style/mypage/my_home.css">
    <link rel="stylesheet" href="/style/mypage/my_home_modal.css">
    <link rel="stylesheet" href="/style/common/_header.css">
    <link rel="stylesheet" href="/style/common/_footer.css">
    <script src="/script/myHome.js"></script>
    <title>마이페이지 메인</title>
    <style>

    </style>
</head>
<body>

<!--region:상호명 모달-->
<div id="companyModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>판매자정보</h2>
            <span class="close" style="margin-left: 770px">&times;</span>
        </div>
        <div id="companyModalBody">
            <!-- 상호명 모달 내용-->
            <table class="table_three">
                <tr>
                    <th>판매자 등급</th>
                    <td>파워딜러</td>
                </tr>
                <tr>
                    <th>상호</th>
                    <td>(주)상호명</td>
                </tr>
                <tr>
                    <th>대표자</th>
                    <td>홍길동</td>
                </tr>
                <tr>
                    <th>전화번호</th>
                    <td>051-123-1000</td>
                </tr>
                <tr>
                    <th>FAX</th>
                    <td>051-123-1001</td>
                </tr>
                <tr>
                    <th>Eamil</th>
                    <td>company@abc.com</td>
                </tr>
                <tr>
                    <th>사업자번호</th>
                    <td>123-12-1234567</td>
                </tr>
                <tr>
                    <th>영업소 재지</th>
                    <td>[210**] 부산광역시 부산진구 대연동 121 10층 1004호</td>
                </tr>
            </table>
            <div>
                <p>
                    * 위 정보는 전자상거래법 제 20조 제2항 및 동법시행령 제 25조 제2항에 의거하여 <br>
                    소바자보호에 의거 공개합니다
                </p>
            </div>
            <button type="button">문의하기</button>
        </div>
    </div>
</div>
<!--endregion-->

<!--region:문의하기 모달-->
<div id="inquiryModal" class="modal inquirymodal">
    <div class="modal-content">
        <div class="modal-header inquiry-header">
            <h2>문의하기</h2>
            <span class="close inquiry-close">&times;</span>
        </div>
        <div class="modal-body">
            <table class="table_four">
                <tr>
                    <th class="table-four-th">문의종류</th>
                    <td class="radio">
                        <input type="radio" id="product" name="inquiryType" value="product">상품
                        <input type="radio" id="delivery" name="inquiryType" value="delivery">배송
                        <input type="radio" id="refund" name="inquiryType" value="refund">반품/취소
                        <input type="radio" id="exchange" name="inquiryType" value="exchange">교환
                        <input type="radio" id="exc" name="inquiryType" value="etc">기타
                    </td>
                </tr>
                <tr>
                    <th class="table-four-th">Email</th>
                    <td><input type="text" placeholder="  chh*gmail.com" name="Email"></td>
                </tr>
                <tr>
                    <th class="table-four-th">제목</th>
                    <td><input type="text" placeholder="" name="title"></td>
                </tr>
                <tr>
                    <th class="table-four-th2">내용</th>
                    <td><input type="text" name="context"></td>
                </tr>
            </table>
            <div class="inquiry_btn">
                <button type="button" class="btn_left">등록하기</button>
                <button type="button" class="btn_right">취소</button>
            </div>
        </div>
    </div>
</div>
<!--endregion-->

<!--region:구매확정 모달-->
<div id="confirmModal" class="modal confirmmodal">
    <div class="modal-content">
        <div class="modal-header confirm-header">
            <h2>구매확정</h2>
            <span class="close confirm-close">&times;</span>
        </div>
        <div class="modal-body">
            <div class="confirm-p">
                <p>상품을 받으셨나요? <br>
                    상품을 받으신 분만 구매확정을 해주세요.
                </p>
            </div>
            <div class="confirm_btn">
                <button type="button" class="btn_left2">확인</button>
                <button type="button" class="btn_right2">취소</button>
            </div>
        </div>
    </div>
</div>
<!--endregion-->

<!--region:상품평쓰기 모달-->
<div id="reviewModal" class="modal reviewmodal">
    <div class="modal-content">
        <div class="modal-header review-header">
            <h2>상품평작성하기</h2>
            <span class="close review-close">&times;</span>
        </div>
        <div class="modal-body">
            <table class="table_five">
                <tr>
                    <th class="five-th1">상품명</th>
                    <td>상품명 출력</td>
                </tr>
                <tr>
                    <th class="five-th2">만족도</th>
                    <td>
                        <div class="star-rating">
                            <input type="radio" id="star5" name="rating" value="5"><label for="star5"
                                                                                          title="5점"></label>
                            <input type="radio" id="star4" name="rating" value="4"><label for="star4"
                                                                                          title="4점"></label>
                            <input type="radio" id="star3" name="rating" value="3"><label for="star3"
                                                                                          title="3점"></label>
                            <input type="radio" id="star2" name="rating" value="2"><label for="star2"
                                                                                          title="2점"></label>
                            <input type="radio" id="star1" name="rating" value="1"><label for="star1"
                                                                                          title="1점"></label>
                        </div>
                    </td>
                </tr>
                <tr>
                    <th class="five-th3">내용</th>
                    <td>
                        <input type="text" placeholder="최소 10자 이상 200자 이내 외로 작성해주세요" class="placeholder">
                    </td>
                </tr>
                <tr>
                    <th class="five-th4">사진</th>
                    <td class="five-td1">

                        <div class="picture-1">
                            <button type="button" class="picture-btn">파일선택</button>
                            <p>선택된파일없음</p>
                        </div>
                        <div class="picture-1">
                            <button type="button" class="picture-btn">파일선택</button>
                            <p>선택된파일없음</p>
                        </div>
                        <div class="picture-1">
                            <button type="button" class="picture-btn">파일선택</button>
                            <p>선택된파일없음</p>
                        </div>
                    </td>
                </tr>
            </table>
            <div class="review_btn">
                <button type="button" class="review_btn1">작성완료</button>
                <button type="button" class="review_btn2">취소</button>
            </div>
        </div>
    </div>
</div>
<!--endregion-->

<!--region:반품신청 모달-->
<div id="returnModal" class="modal returnmodal">
    <div class="modal-content">
        <div class="modal-header return-header">
            <h2>반품신청</h2>
            <span class="close return-close">&times;</span>
        </div>
        <div class="modal-body">
            <div>
                <h2>상품정보</h2>
            </div>
            <table class="table_six">
                <thead>
                <tr>
                    <th>날짜</th>
                    <th>상품정보</th>
                    <th>결제금액</th>
                    <th>상태</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <p>0000-00-00</p>
                    </td>
                    <td>
                        <div class="tablesix-imgpdiv">
                            <div>
                                <img src="/images/admin-persons.png" alt="#">
                            </div>
                            <p>주문번호: 101221341 <br>
                                (주) 상호명 <br>
                                상품명 <br>
                                수량: 1개 <br><br>
                                <strong class="strong_1">34,000원</strong>
                            </p>
                        </div>
                    </td>

                    <td>
                        <div>
                            <div class="gyeoljae2">
                                <p>판매가&nbsp;34,000원 <br>
                                    할인 &nbsp;&nbsp;&nbsp; -3,000원 <br><br>
                            </div>
                            결제금액 &nbsp; <strong>34,000원</strong>
                            </p>
                        </div>
                    </td>
                    <td>
                        배송완료
                    </td>
                </tr>
                </tbody>
            </table>
            <div>
                <h2 class="table2-h2">반품정보 입력</h2>
            </div>
            <table class="table_seven">
                <tr>
                    <th>반품유형</th>
                    <td class="radio">
                        <input type="radio" id="change" name="inquiryType" value="change">단순 변심
                        <input type="radio" id="error" name="inquiryType" value="error">파손 및 불량
                        <input type="radio" id="mistake" name="inquiryType" value="mistake">주문 실수
                        <input type="radio" id="etc" name="inquiryType" value="etc">기타
                    </td>
                </tr>
                <tr>
                    <th>사유입력</th>
                    <td>
                        <input type="text" name="reason">
                    </td>
                </tr>
                <tr>
                    <th>사진첨부(선택)</th>
                    <td>
                        <div class="picture-2">
                            <button type="button" class="picture2-btn">파일선택</button>
                            <p>선택된파일없음</p>
                        </div>
                    </td>
                </tr>
            </table>
            <div class="review_btn">
                <button type="button" class="return_btn1">반품신청</button>
                <button type="button" class="return_btn2">취소</button>
            </div>
        </div>
    </div>
</div>
<!--endregion-->

<!--region:교환신청 모달-->
<div id="exchangeModal" class="modal exchangemodal">
    <div class="modal-content">
        <div class="modal-header exchange-header">
            <h2>교환신청</h2>
            <span class="close exchange-close">&times;</span>
        </div>
        <div class="modal-body">
            <div>
                <h2>상품정보</h2>
            </div>
            <table class="table_six">
                <thead>
                <tr>
                    <th>날짜</th>
                    <th>상품정보</th>
                    <th>결제금액</th>
                    <th>상태</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <p>0000-00-00</p>
                    </td>
                    <td>
                        <div class="tablesix-imgpdiv">
                            <div>
                                <img src="/images/admin-persons.png" alt="#">
                            </div>
                            <p>주문번호: 101221341 <br>
                                (주) 상호명 <br>
                                상품명 <br>
                                수량: 1개 <br><br>
                                <strong class="strong_1">34,000원</strong>
                            </p>
                        </div>
                    </td>

                    <td>
                        <div>
                            <div class="gyeoljae2">
                                <p>판매가&nbsp;34,000원 <br>
                                    할인 &nbsp;&nbsp;&nbsp; -3,000원 <br><br>
                            </div>
                            결제금액 &nbsp; <strong>34,000원</strong>
                            </p>
                        </div>
                    </td>
                    <td>
                        배송완료
                    </td>
                </tr>
                </tbody>
            </table>
            <div>
                <h2 class="table2-h2">반품정보 입력</h2>
            </div>
            <table class="table_seven">
                <tr>
                    <th>반품유형</th>
                    <td class="radio">
                        <input type="radio" id="change1" name="inquiryType" value="change">단순 변심
                        <input type="radio" id="error1" name="inquiryType" value="error">파손 및 불량
                        <input type="radio" id="mistake1" name="inquiryType" value="mistake">주문 실수
                        <input type="radio" id="etc1" name="inquiryType" value="etc">기타
                    </td>
                </tr>
                <tr>
                    <th>사유입력</th>
                    <td>
                        <input type="text" name="reason">
                    </td>
                </tr>
                <tr>
                    <th>사진첨부(선택)</th>
                    <td>
                        <div class="picture-2">
                            <button type="button" class="picture2-btn">파일선택</button>
                            <p>선택된파일없음</p>
                        </div>
                    </td>
                </tr>
            </table>
            <div class="review_btn">
                <button type="button" class="return_btn1">반품신청</button>
                <button type="button" class="return_btn2">취소</button>
            </div>
        </div>
    </div>
</div>
<!--endregion-->

<div id="container">
    <th:block th:include="/common/_header.html"/>
    <main class="main_container">

        <div class="mypage-header">
            <div class="mypage-title">
                <h2>나의쇼핑정보</h2>
            </div>
            <th:block th:insert="~{/myPage/_header.html}"/>
        </div>

        <div class="div_section">
            <th:block th:insert="~{/myPage/_side.html}"/>

            <section class="right_section">
                <div class="banner"></div>
                <article>
                    <div class="article_title">
                        <h3>최근 주문내역</h3>
                        <a th:href="@{/myPage/my_order}">더보기 ></a>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>날짜</th>
                                <th>상품정보</th>
                                <th>상품</th>
                                <th>확인/신청</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="table-tr1" th:each="order, i : ${recentOrder}">
                                <td class="table-td" th:text="${order.orderDate}"></td>
                                <td class="table-td">
                                    <div>
                                        <img th:src="@{'/images/' + ${order.imageList}}" alt="#" class="main_img1">
                                    </div>
                                    <div>
                                        <a href="#" th:onclick="'showPopup(' + ${i.index} + ')'">
                                            <p th:text="${order.orderCode}"></p>
                                        </a>
                                        <!-- 기타 주문 요약 정보 -->
                                        <a href="#" class="company-link main_p">
                                            <p th:text="${order.companyName}">회사명</p>
                                        </a>
                                        <p th:text="${order.productName}">상품명</p>
                                        <p>
                                            <span>수량 : </span>
                                            <span>[[${order.quantity}]]</span>
                                        </p>
                                        <p th:text="${order.price}">상품 가격</p>
                                    </div>
                                </td>
                                <td class="baesong table-td" th:text="${order.orderStatus}"></td>
                                <td class="table-td">
                                    <button class="btn_blue confirm-btn">구매확정</button>
                                    <button class="btn_blue review-btn">상품평쓰기</button>
                                    <button class="return-btn">반품신청</button>
                                    <button class="exchange-btn">교환신청</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- ✅ tr 밖에 모달을 따로 위치 -->
                    <!-- 주문 상세 모달 -->
                    <div th:each="order, i : ${recentOrder}" th:id="'popup-' + ${i.index}" class="popup" style="display:none;">
                        <div class="popup-content">
                            <h2>주문 상세</h2>
                            <div class="info">
                                <h3>상품 정보</h3>
                                <table>
                                    <tr>
                                        <th>상품 이미지</th>
                                        <th colspan="2">상품 상세정보</th>
                                        <th colspan="2">결제 정보</th>
                                    </tr>
                                    <tr>
                                        <td rowspan="6" style="width: 230px; padding: 0">
                                            <img th:src="@{'/images/' + ${order.imageList}}" alt="#" class="main_img1">
                                        </td>
                                        <th>주문 번호</th>
                                        <td>[[${order.orderCode}]]</td>
                                        <th>금액</th>
                                        <td>[[${order.price}]]원</td>
                                    </tr>
                                    <tr>
                                        <th>판매자</th>
                                        <td>[[${order.companyName}]]</td>
                                        <th>할인</th>
                                        <td>[[${order.discount}]]원</td>
                                    </tr>
                                    <tr>
                                        <th>주문일</th>
                                        <td>[[${order.orderDate}]]</td>
                                        <th>결제</th>
                                        <td>[[${order.actualMoney}]]원</td>
                                    </tr>
                                    <tr>
                                        <th>상품명</th>
                                        <td>[[${order.productName}]]</td>
                                        <th>배송비</th>
                                        <td>[[${order.fee}]]원</td>
                                    </tr>
                                    <tr>
                                        <th>수량</th>
                                        <td>[[${order.quantity}]]</td>
                                        <th>결제수단</th>
                                        <td>[[${order.payment}]]</td>
                                    </tr>
                                    <tr>
                                        <th>금액</th>
                                        <td>[[${order.price}]]원</td>
                                    </tr>
                                </table>
                                <h3>배송 정보</h3>
                                <table>
                                    <tr>
                                        <th>배송상태</th>
                                        <td>[[${order.orderStatus}]]</td>
                                    </tr>
                                    <tr>
                                        <th>이름</th>
                                        <td>[[${order.receiver}]]</td>
                                    </tr>
                                    <tr>
                                        <th>주소</th>
                                        <td>[[${order.delivery}]]</td>
                                    </tr>
                                </table>
                            </div>
                            <button th:onclick="'closePopup(' + ${i.index} + ')'">닫기</button>
                        </div>
                    </div>
                    <script>
                        function showPopup(index) {
                            document.getElementById("popup-" + index).style.display = "block";
                        }

                        function closePopup(index) {
                            document.getElementById("popup-" + index).style.display = "none";
                        }
                    </script>
                    <div class="article_title2">
                        <h3>포인트적립내역</h3>
                        <a th:href="@{/myPage/my_order}">더보기 ></a>
                    </div>
                    <table class="main_point">
                        <thead class="point_thead">
                            <tr class="point_tr">
                                <th class="point_th1">날짜</th>
                                <th class="point_th2">구분</th>
                                <th class="point_th4">적립금액</th>
                                <th class="point_th5">적립내용</th>
                                <th class="point_th3">적립코드</th>
                                <th class="point_th6">유효기간</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="point_tr1" th:each="point : ${recentPoint}">
                                <td class="point_td1" th:text="${point.giveDate}"></td>
                                <td class="point_td2" th:text="${point.givePoint > 0 ? '적립' : (point.givePoint < 0 ? '차감' : '0') }">적립</td>
                                <td class="point_td3" th:text="${point.givePoint}"></td>
                                <td class="point_td1" th:text="${point.giveDate}"></td>
                                <td class="point_td4" th:text="${point.orderCode}"></td>
                                <td>유효기간 없음</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="article_title3">
                        <h3>상품평</h3>
                        <a th:href="@{/myPage/my_review}">더보기 ></a>
                    </div>
                    <table class="table_product">
                        <thead>
                            <tr>
                                <th class="product_th1">번호</th>
                                <th class="product_th2">상품명</th>
                                <th class="product_th3">내용</th>
                                <th class="product_th4">평점</th>
                                <th class="product_th5">작성일</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="product_tr1">
                                <td class="pr_td">1</td>
                                <td class="pr_td">상품번호/상품명</td>
                                <td class="pr_td">배송이 빠릅니다. 잘 사용하겠습니다.</td>
                                <td class="pr_star">
                                    <div class="star-rating1">
                                        <input type="radio" id="star9" name="rating" value="4"><label for="star8"
                                                                                                      title="4점"></label>
                                        <input type="radio" id="star8" name="rating" value="3"><label for="star7"
                                                                                                      title="3점"></label>
                                        <input type="radio" id="star7" name="rating" value="2"><label for="star6"
                                                                                                      title="2점"></label>
                                        <input type="radio" id="star6" name="rating" value="1"><label for="star5"
                                                                                                      title="1점"></label>
                                    </div>
                                </td>
                                <td class="pr_date">2022-12-10</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="article_title4">
                        <h3>고객센터</h3>
                        <a th:href="@{/myPage/my_qna}">더보기 ></a>
                    </div>
                    <table class="table_inquiry">
                        <thead>
                        <tr>
                            <th class="in_th1">번호</th>
                            <th class="in_th2">문의채널</th>
                            <th class="in_th3">문의유형</th>
                            <th class="in_th4">제목</th>
                            <th class="in_th5">작성일</th>
                            <th class="in_th6">상태</th>
                        </tr>
                        </thead>
                        <tbody>
                            <tr class="in_tr1" th:each="qna : ${recentQna}">
                               <td class="in_td1" th:text="${qna.qnaNo}"></td>
                               <td class="in_td2" th:text="${qna.channel}"></td>
                               <td class="in_td3" th:text="${qna.cate2}"></td>
                               <td class="in_td4" th:text="${qna.title}"></td>
                               <td class="in_td5" th:text="${qna.regDate}"></td>
                                <td class="in_td6"
                                    th:text="${qna.status}"
                                    th:classappend="${qna.status == '답변완료'} ? ' answered' : ''">
                                </td>
                            </tr>
                            <!-- 리스트가 null 또는 비어 있으면 출력 -->
                            <tr th:if="${recentQna == null or #lists.isEmpty(recentQna)}">
                                <td colspan="6">문의 내역이 없습니다.</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="article_title4">
                        <h3>상품문의</h3>
                        <a th:href="@{/myPage/my_qna}">더보기 ></a>
                    </div>
                    <table class="table_inquiry">
                        <thead>
                            <tr>
                                <th class="in_th1">번호</th>
                                <th class="in_th2">문의채널</th>
                                <th class="in_th4">제목</th>
                                <th class="in_th5">작성일</th>
                                <th class="in_th6">상태</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="in_tr1">
                               <td class="in_td1">1</td>
                               <td class="in_td2">상품문의</td>
                               <td class="in_td4">신용카드 결제 중 오류가 난 경우 어떻게 하나요?</td>
                               <td class="in_td5">2022-12-12</td>
                               <td class="in_td6">검토중</td>
                            </tr>
                        </tbody>
                    </table>
                </article>
            </section>
        </div>
    </main>
    <th:block th:replace="/common/_footer.html :: footerFragment(versionId=${selectedVersionId})"/>
</div>
</body>
</html>